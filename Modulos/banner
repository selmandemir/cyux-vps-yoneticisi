#!/bin/bash
clear

# --- Otomatik YapÄ±landÄ±rma ---
# SSH yapÄ±landÄ±rmasÄ±nda 'Banner' satÄ±rÄ± var mÄ± diye kontrol et.
chk=$(cat /etc/ssh/sshd_config | grep Banner)

# EÄŸer Dropbear servisi Ã§alÄ±ÅŸÄ±yorsa, onun da banner dosyasÄ±nÄ± kullanmasÄ±nÄ± saÄŸla.
[[ $(netstat -nltp|grep 'dropbear' | wc -l) != '0' ]] && {
    local="/etc/bannerssh"
    # EÄŸer Dropbear ayar dosyasÄ±nda banner satÄ±rÄ± yoksa, ekle.
    [[ $(grep -wc $local /etc/default/dropbear) = '0' ]] && echo 'DROPBEAR_BANNER="/etc/bannerssh"' >> /etc/default/dropbear
}

# EÄŸer SSH yapÄ±landÄ±rmasÄ±nda 'Banner' satÄ±rÄ± zaten varsa, dosya yolunu oradan al.
[[ "$(echo "$chk" | grep -v '#Banner' | grep Banner)" != "" ]] && {
    local=$(echo "$chk" |grep -v "#Banner" | grep Banner | awk '{print $2}')
} || {
    # EÄŸer SSH yapÄ±landÄ±rmasÄ±nda 'Banner' satÄ±rÄ± yoksa, varsayÄ±lan yolu ekle.
    local="/etc/bannerssh"
    [[ $(grep -wc $local /etc/ssh/sshd_config) = '0' ]] && echo "Banner /etc/bannerssh" >> /etc/ssh/sshd_config
}

# --- MenÃ¼ ArayÃ¼zÃ¼ ---
# BaÅŸlÄ±k metnini mavi arka plan Ã¼zerine beyaz ve kalÄ±n olarak yazdÄ±r.
echo -e "\E[44;1;37m        ã…¤ğŸ‰ã…¤BANNER YÃ–NETÄ°CÄ°SÄ°ã…¤ğŸ‰ã…¤         \E[0m"
echo ""

# Manuel banner ekleme yÃ¶ntemini aÃ§Ä±kla.
echo -e "\033[1;32mâ—‡â”€â”€â”€MANUEL BANNER EKLEME YÃ–NTEMÄ°â”€â”€â”€â—‡"
echo -e "\033[1;37mâ—‡ 1. AdÄ±m:- AÅŸaÄŸÄ±daki komutu kopyalayÄ±p gÃ¶nderinã…¤ğŸ‘‡ã…¤"
echo -e "\033[1;31msudo nano /etc/bannerssh"
echo -e "\033[1;37mâ—‡ BANNER'INIZI HTML METNÄ° OLARAK YAPIÅTIRIN"
echo -e "\033[1;37mâ—‡ 2. AdÄ±m:- Kaydetmek iÃ§in CTRL+O, Ã§Ä±kmak iÃ§in CTRL+X yapÄ±n"
echo ""
echo -e "\033[1;32m Veya"
echo ""

# Kolay banner ekleme yÃ¶ntemini gÃ¶ster.
echo -e "\033[1;32mâ—‡â”€â”€â”€KOLAY BANNER EKLEME YÃ–NTEMÄ°â”€â”€â”€â—‡"
echo -e "\033[1;31m[\033[1;36m1\033[1;31m]\033[1;37m â€¢ \033[1;33mBANNER EKLE"
echo -e "\033[1;31m[\033[1;36m2\033[1;31m]\033[1;37m â€¢ \033[1;33mBANNER'I KALDIR"
echo -e "\033[1;31m[\033[1;36m3\033[1;31m]\033[1;37m â€¢ \033[1;33mGERÄ° DÃ–N"
echo ""

# KullanÄ±cÄ±dan bir seÃ§im yapmasÄ±nÄ± iste.
echo -ne "\033[1;32mâ—‡ NE YAPMAK Ä°STERSÄ°NÄ°Z\033[1;31m ?\033[1;37m : "; read resp

# --- KullanÄ±cÄ± SeÃ§imlerini Ä°ÅŸleme ---
if [[ "$resp" = "1" ]]; then
    echo ""
    # Banner metnini al.
    echo -ne "\033[1;32mâ—‡ GÃ–RÃœNMESÄ°NÄ° Ä°STEDÄ°ÄÄ°NÄ°Z MESAJ NEDÄ°R\033[1;31m ?\033[1;37m : "; read msg1
    if [[ -z "$msg1" ]]; then
        echo -e "\n\033[1;31mâ—‡ BoÅŸ veya geÃ§ersiz alan!\033[0m"
        sleep 2
        banner # Bu script'i yeniden baÅŸlat
    fi

    # YazÄ± tipi boyutunu seÃ§tir.
    echo -e "\n\033[1;31m[\033[1;36m01\033[1;31m]\033[1;33m KÃœÃ‡ÃœK YAZI TÄ°PÄ°"
    echo -e "\033[1;31m[\033[1;36m02\033[1;31m]\033[1;33m ORTA YAZI TÄ°PÄ°"
    echo -e "\033[1;31m[\033[1;36m03\033[1;31m]\033[1;33m BÃœYÃœK YAZI TÄ°PÄ°"
    echo -e "\033[1;31m[\033[1;36m04\033[1;31m]\033[1;33m DEV YAZI TÄ°PÄ°"
    echo ""
    echo -ne "\033[1;32mâ—‡ YAZI TÄ°PÄ° BOYUTU NE OLSUN\033[1;31m ?\033[1;37m : "; read opc
    if [[ "$opc" = "1" ]] || [[ "$opc" = "01" ]]; then _size='6'
    elif [[ "$opc" = "2" ]] || [[ "$opc" = "02" ]]; then _size='4'
    elif [[ "$opc" = "3" ]] || [[ "$opc" = "03" ]]; then _size='3'
    elif [[ "$opc" = "4" ]] || [[ "$opc" = "04" ]]; then _size='1'
    fi

    # YazÄ± tipi rengini seÃ§tir.
    echo -e "\n\033[1;31m[\033[1;36m01\033[1;31m]\033[1;33m MAVÄ°"
    echo -e "\033[1;31m[\033[1;36m02\033[1;31m]\033[1;33m YEÅÄ°L"
    echo -e "\033[1;31m[\033[1;36m03\033[1;31m]\033[1;33m KIRMIZI"
    echo -e "\033[1;31m[\033[1;36m04\033[1;31m]\033[1;33m SARI"
    echo -e "\033[1;31m[\033[1;36m05\033[1;31m]\033[1;33m PEMBE"
    echo -e "\033[1;31m[\033[1;36m06\033[1;31m]\033[1;33m CAMGÃ–BEÄÄ°"
    echo -e "\033[1;31m[\033[1;36m07\033[1;31m]\033[1;33m TURUNCU"
    echo -e "\033[1;31m[\033[1;36m08\033[1;31m]\033[1;33m MOR"
    echo -e "\033[1;31m[\033[1;36m09\033[1;31m]\033[1;33m SÄ°YAH"
    echo -e "\033[1;31m[\033[1;36m10\033[1;31m]\033[1;33m RENKSÄ°Z"
    echo ""
    echo -ne "\033[1;32mâ—‡ RENGÄ° NE OLSUN\033[1;31m ?\033[1;37m : "; read ban_cor
    
    # SeÃ§ilen renge gÃ¶re HTML kodunu oluÅŸtur ve banner dosyasÄ±na yaz.
    if [[ "$ban_cor" = "1" ]] || [[ "$ban_cor" = "01" ]]; then echo "<h$_size><font color='blue'>$msg1" > $local
    elif [[ "$ban_cor" = "2" ]] || [[ "$ban_cor" = "02" ]]; then echo "<h$_size><font color='green'>$msg1" > $local
    elif [[ "$ban_cor" = "3" ]] || [[ "$ban_cor" = "03" ]]; then echo "<h$_size><font color='red'>$msg1" > $local
    elif [[ "$ban_cor" = "4" ]] || [[ "$ban_cor" = "04" ]]; then echo "<h$_size><font color='yellow'>$msg1" > $local
    elif [[ "$ban_cor" = "5" ]] || [[ "$ban_cor" = "05" ]]; then echo "<h$_size><font color='#F535AA'>$msg1" > $local
    elif [[ "$ban_cor" = "6" ]] || [[ "$ban_cor" = "06" ]]; then echo "<h$_size><font color='cyan'>$msg1" > $local
    elif [[ "$ban_cor" = "7" ]] || [[ "$ban_cor" = "07" ]]; then echo "<h$_size><font color='#FF7F00'>$msg1" > $local
    elif [[ "$ban_cor" = "8" ]] || [[ "$ban_cor" = "08" ]]; then echo "<h$_size><font color='#9932CD'>$msg1" > $local
    elif [[ "$ban_cor" = "9" ]] || [[ "$ban_cor" = "09" ]]; then echo "<h$_size><font color='black'>$msg1" > $local
    elif [[ "$ban_cor" = "10" ]]; then
        echo "<h$_size>$msg1</h$_size>" > $local
        /etc/init.d/ssh restart > /dev/null 2>&1
        echo -e "\n\033[1;32mâ—‡ BANNER EKLENDÄ°!\033[0m"
        sleep 2
        menu
    else
        echo -e "\n\033[1;31mâ—‡ GeÃ§ersiz seÃ§enek!\033[0m"
        sleep 2
        banner
    fi
    
    # HTML etiketlerini kapat.
    echo "</font></h$_size>" >> $local
    
    # DeÄŸiÅŸikliklerin geÃ§erli olmasÄ± iÃ§in servisleri yeniden baÅŸlat.
    service ssh restart > /dev/null 2_>&_1 && service dropbear restart > /dev/null 2_>&_1
    echo -e "\n\033[1;32mâ—‡ BANNER EKLENDÄ°!\033[0m"
    unset ban_cor

elif [[ "$resp" = "2" ]]; then
    # Banner dosyasÄ±nÄ±n iÃ§ini boÅŸaltarak banner'Ä± kaldÄ±r.
    echo " " > $local
    echo -e "\n\033[1;32mâ—‡ BANNER SÄ°LÄ°NDÄ°!\033[0m"
    service ssh restart > /dev/null 2>&1 && service dropbear restart > /dev/null 2>&1
    sleep 2
    menu
elif [[ "$resp" = "3" ]]; then
    # Ana menÃ¼ye dÃ¶n.
    menu
else
    # GeÃ§ersiz seÃ§enek girilirse uyar.
    echo -e "\n\033[1;31mâ—‡ GeÃ§ersiz seÃ§enek!\033[0m"
    sleep 2
    banner
fi